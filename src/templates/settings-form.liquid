<form class="form settings-form" id="settings-form">
  <h2 class="section-heading">Image Options</h2>

  <table class="table table-formats">
    <caption>File Formats</caption>
    <thead>
      <tr>
        <th scope="col">Format</th>
        <th scope="col">Checked by default</th>
      </tr>
    </thead>
    <tbody>
      {% for format in options.settings.formats %}
        {% if format[1] %}
        {% assign checked = 'checked' %}
        {% else %}
        {% assign checked = '' %}
        {% endif %}
        <tr>
          <th scope="row" id="format-{{ forloop.index }}">{{ format[0] | replace: 'jpg' , 'jpeg' | upcase }}</th>
          <td>
            <input type="checkbox" class="toggle" id="format-{{ format[0] }}-selected"
              name="format-selected" {{checked}} aria-label="Checked by default"
              aria-describedby="format-{{ forloop.index }}" data-format="settings.formats.{{ format[0] }}">
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

  <table class="table table-sizes">
    <caption>Sizes</caption>
    <thead>
      <tr>
        <th scope="col">Width</th>
        <th scope="col">Checked by default</th>
        <th scope="col">Edit</th>
        <th scope="col">Delete</th>
      </tr>
    </thead>
    <tbody>
      {% for size in options.settings.scale %}
        {% if size[1] %}
          {% assign checked = 'checked' %}
          {% else %}
          {% assign checked = '' %}
        {% endif %}
        <tr>
          <th scope="row" id="size-{{ forloop.index }}">{{ size[0] |  replace: 'auto', 'Original Size' }}</th>
          <td>
            <input type="checkbox" class="toggle" id="size-{{ forloop.index }}-selected"
              name="size-selected" {{checked}} aria-label="Checked by default"
              aria-describedby="size-{{ forloop.index }}" data-size="settings.scale.{{ size[0] }}">
          </td>
          <td>
            <button class="edit" aria-label="Edit the size" title="Edit" type="button">
              <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="m5 16l-1 4l4-1L19.586 7.414a2 2 0 0 0 0-2.828l-.172-.172a2 2 0 0 0-2.828 0zM15 6l3 3m-5 11h8"/></svg>
            </button>
          </td>
          <td>
            {% unless size[0] == 'auto' %}
              <button class="delete" aria-label="Delete size" title="Delete" type="button"
                data-size="settings.scale.{{ size[0] }}">
                <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512">
                  <path fill="none" d="M296 64h-80a7.91 7.91 0 0 0-8 8v24h96V72a7.91 7.91 0 0 0-8-8" />
                  <path fill="none" d="M292 64h-72a4 4 0 0 0-4 4v28h80V68a4 4 0 0 0-4-4" />
                  <path fill="currentColor"
                    d="M447.55 96H336V48a16 16 0 0 0-16-16H192a16 16 0 0 0-16 16v48H64.45L64 136h33l20.09 314A32 32 0 0 0 149 480h214a32 32 0 0 0 31.93-29.95L415 136h33ZM176 416l-9-256h33l9 256Zm96 0h-32V160h32Zm24-320h-80V68a4 4 0 0 1 4-4h72a4 4 0 0 1 4 4Zm40 320h-33l9-256h33Z" />
                </svg>
              </button>
            {% endunless %}
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

  <table class="table table-sizes">
    <caption>Resize Options</caption>
    <thead>
      <tr>
        <th scope="col">Dimensions</th>
        <th scope="col">Checked by default</th>
        <th scope="col">Edit</th>
        <th scope="col">Delete</th>
      </tr>
    </thead>
    <tbody>
      {% for size in options.settings.resize %}
        {% if size[1] %}
          {% assign checked = 'checked' %}
          {% else %}
          {% assign checked = '' %}
        {% endif %}
        <tr>
          <th scope="row" id="size-{{ forloop.index }}">{{ size[0] |  replace: 'auto', 'Original Size' }}</th>
          <td>
            <input type="checkbox" class="toggle" id="size-{{ forloop.index }}-selected"
              name="resize-selected" {{checked}} aria-label="Checked by default"
              aria-describedby="size-{{ forloop.index }}" data-size="settings.resize.{{ size[0] }}">
          </td>
          <td>
            <button class="edit" aria-label="Edit the size" title="Edit" type="button">
              <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="m5 16l-1 4l4-1L19.586 7.414a2 2 0 0 0 0-2.828l-.172-.172a2 2 0 0 0-2.828 0zM15 6l3 3m-5 11h8"/></svg>
            </button>
          </td>
          <td>
            <button class="delete" aria-label="Delete size" title="Delete" type="button"
              data-size="settings.resize.{{ size[0] }}">
              <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512">
                <path fill="none" d="M296 64h-80a7.91 7.91 0 0 0-8 8v24h96V72a7.91 7.91 0 0 0-8-8" />
                <path fill="none" d="M292 64h-72a4 4 0 0 0-4 4v28h80V68a4 4 0 0 0-4-4" />
                <path fill="currentColor"
                  d="M447.55 96H336V48a16 16 0 0 0-16-16H192a16 16 0 0 0-16 16v48H64.45L64 136h33l20.09 314A32 32 0 0 0 149 480h214a32 32 0 0 0 31.93-29.95L415 136h33ZM176 416l-9-256h33l9 256Zm96 0h-32V160h32Zm24-320h-80V68a4 4 0 0 1 4-4h72a4 4 0 0 1 4 4Zm40 320h-33l9-256h33Z" />
              </svg>
            </button>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

  <button class="submit dialog-open" id="add-size--button" type="button" data-dialog="add-size--dialog" aria-haspopup="dialog">
    <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512">
      <path fill="currentColor"
        d="M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208s208-93.31 208-208S370.69 48 256 48m96 224h-80v80h-32v-80h-80v-32h80v-80h32v80h80Z" />
    </svg>
    <span>Add a new size</span>
  </button>
  <h2 class="section-heading">General Settings</h2>
  <fieldset>
    <legend>Color Mode</legend>
    {% for option in options.settings.theme.mode.options %}
    {% if option[0] == options.settings.theme.mode.value %}
    {% assign checked = 'checked' %}
    {% else %}
    {% assign checked = '' %}
    {% endif %}
    <div class="form-item">
      <label for="color-mode-{{ option[0] }}" class="radio-label">
        <input type="radio" class="radio" name="color-mode" value="{{ option[0] }}" id="color-mode-{{ option[0] }}" {{
          checked }}>
        {{ option[1] }}
      </label>
    </div>
    {% endfor %}
  </fieldset>
  <fieldset>
    <legend>When to delete temporary files</legend>
    {% for option in options.settings.temp_files.schedule.options %}
    {% if option[0] == options.settings.temp_files.schedule.value %}
    {% assign checked = 'checked' %}
    {% else %}
    {% assign checked = '' %}
    {% endif %}
    <div class="form-item">
      <label for="temp-files-{{ option[0] }}" class="radio-label">
        <input type="radio" class="radio" name="temp-files" value="{{ option[0] }}" id="temp-files-{{ option[0] }}" {{
          checked }}>
        {{ option[1] }}
      </label>
    </div>
    {% endfor %}
  </fieldset>
  <fieldset>
    <legend>Restore Defaults</legend>
    <p>
      <button class="submit" type="button" id="restore-defaults">Restore Default Settings</button>
    </p>
  </fieldset>
</form>

<dialog class="dialog add-size" id="add-size--dialog">
  <div class="dialog-inner">
    <form class="form" id="add-size--form">
      <h2>Add a custom size</h2>
      <table class="table">
        <thead>
          <tr>
            <th scope="col">Size</th>
            <th scope="col">Checked by default</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>
              <input aria-label="New custoom size" type="text" id="add-size--size" name="add-size--size" data-selected="add-size--selected">
            </td>
            <td>
              <input type="checkbox" class="toggle" id="add-size--selected"
                name="add-size--selected" {{checked}} aria-label="Checked by default"
                aria-describedby="size-{{ forloop.index }}" data-size="settings.resize.{{ size[0] }}">
            </td>
          </tr>
        </tbody>
      </table>
      <div class="dialog-buttons">
        <button class="submit" id="add-size--submit" type="button">
          <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512">
            <path fill="currentColor"
              d="M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208s208-93.31 208-208S370.69 48 256 48m96 224h-80v80h-32v-80h-80v-32h80v-80h32v80h80Z" />
          </svg>
          <span>Add</span>
          </button>
        <button class="submit dialog-close" id="add-size--cancel" type="button">
          <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M16 2C8.2 2 2 8.2 2 16s6.2 14 14 14s14-6.2 14-14S23.8 2 16 2m5.4 21L16 17.6L10.6 23L9 21.4l5.4-5.4L9 10.6L10.6 9l5.4 5.4L21.4 9l1.6 1.6l-5.4 5.4l5.4 5.4z"/></svg>
          <span>Cancel</span>
        </button>
      </div>
      <p id="add-size--feedback">&nbsp;</p>
    </form>
  </div>
</dialog>