<form class="form">
  <h2 class="section-heading">Image Options</h2>
  <fieldset>
    <legend>File Formats</legend>
    {% for format in options.settings.formats %}
    {% if format[1] %}
    {% assign checked = 'checked' %}
    {% else %}
    {% assign checked = '' %}
    {% endif %}
    <div class="form-item">
      <div class="item-name">{{ format[0] | replace: 'jpg' , 'jpeg' | upcase }}</div>
      <div class="item-default">
        <label for="format-{{ format[0] }}-selected" class="default-label">
          <input type="checkbox" class="selected" id="format-{{ format[0] }}-selected"
            name="format-{{ format[0] }}-selected" {{checked}}>
          selected by default
        </label>
      </div>
    </div>
    {% endfor %}
  </fieldset>
  <fieldset>
    <legend>Sizes</legend>
    <fieldset>
      <legend>Scale</legend>
      {% for size in options.settings.scale %}
      {% if size[1] %}
      {% assign checked = 'checked' %}
      {% else %}
      {% assign checked = '' %}
      {% endif %}
      <div class="form-item">
        {% if size[0] == 'auto' %}
        <div class="item-name">Original size</div>
        {% else %}
        <div class="item-name">
          <input type="text" name="size" aria-label="Standard widths, entry number {{ forloop.index }}"
            value="{{ size[0] }}" data-size="settings.scale.{{ size[0] }}"
            data-selected="size-{{ forloop.index }}-selected">
        </div>
        {% endif %}
        <div class="item-default">
          <label for="size-{{ forloop.index }}-selected" class="default-label">
            <input type="checkbox" id="size-{{ forloop.index }}-selected" name="size-selected" data-size="settings.scale.{{ size[0] }}"
              {{checked}}>
            selected by default
          </label>
          {% unless size[0] == 'auto' %}
          <button class="item-delete" aria-label="Delete size" title="Delete" type="button"
            data-size="settings.scale.{{ size[0] }}">
            <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512">
              <path fill="none" d="M296 64h-80a7.91 7.91 0 0 0-8 8v24h96V72a7.91 7.91 0 0 0-8-8" />
              <path fill="none" d="M292 64h-72a4 4 0 0 0-4 4v28h80V68a4 4 0 0 0-4-4" />
              <path fill="currentColor"
                d="M447.55 96H336V48a16 16 0 0 0-16-16H192a16 16 0 0 0-16 16v48H64.45L64 136h33l20.09 314A32 32 0 0 0 149 480h214a32 32 0 0 0 31.93-29.95L415 136h33ZM176 416l-9-256h33l9 256Zm96 0h-32V160h32Zm24-320h-80V68a4 4 0 0 1 4-4h72a4 4 0 0 1 4 4Zm40 320h-33l9-256h33Z" />
            </svg>
          </button>
          {% endunless %}
        </div>
      </div>
      {% endfor %}
    </fieldset>
    <fieldset>
      <legend>Resize</legend>
      {% for size in options.settings.resize %}
      {% if size[1] %}
      {% assign checked = 'checked' %}
      {% else %}
      {% assign checked = '' %}
      {% endif %}
      <div class="form-item">
        <div class="item-name">
          <input type="text" name="resize" aria-label="Standard resize dimensions, entry number {{ forloop.index }}"
            value="{{ size[0] }}" data-size="settings.resize.{{ size[0] }}"
            data-selected="resize-{{ forloop.index }}-selected">
        </div>
        <div class="item-default">
          <label for="resize-{{ forloop.index }}-selected" class="default-label">
            <input type="checkbox" id="resize-{{ forloop.index }}-selected" name="resize-selected"
              data-size="settings.resize.{{ size[0] }}" {{checked}}>
            selected by default
          </label>
        </div>
      </div>
      {% endfor %}
    </fieldset>
    <fieldset>
      <legend>Add new</legend>
      <button class="add-size" id="add-size" type="button">
        <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512">
          <path fill="currentColor"
            d="M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208s208-93.31 208-208S370.69 48 256 48m96 224h-80v80h-32v-80h-80v-32h80v-80h32v80h80Z" />
        </svg>
        Add a new size
      </button>
      <dialog class="dialog" id="add-size-dialog">
        <div class="dialog-inner">
          <h2 class="dialog-title">Add a new default size</h2>
          <fieldset>
            <legend>Dimensions</legend>
            <div class="form-item">
              <label for="add-size-width">Width *</label>
              <input type="text" id="add-size-width" name="add-size-width">
            </div>
          </fieldset>
        </div>
      </dialog>
    </fieldset>
  </fieldset>
  <h2 class="section-heading">General Settings</h2>
  <fieldset>
    <legend>Color Mode</legend>
    {% for option in options.settings.theme.mode.options %}
    {% if option[0] == options.settings.theme.mode.value %}
    {% assign checked = 'checked' %}
    {% else %}
    {% assign checked = '' %}
    {% endif %}
    <div class="form-item">
      <label for="color-mode-{{ option[0] }}" class="radio-label">
        <input type="radio" class="radio" name="color-mode" value="{{ option[0] }}" id="color-mode-{{ option[0] }}" {{
          checked }}>
        {{ option[1] }}
      </label>
    </div>
    {% endfor %}
  </fieldset>
  <fieldset>
    <legend>When to delete temporary files</legend>
    {% for option in options.settings.temp_files.schedule.options %}
    {% if option[0] == options.settings.temp_files.schedule.value %}
    {% assign checked = 'checked' %}
    {% else %}
    {% assign checked = '' %}
    {% endif %}
    <div class="form-item">
      <label for="temp-files-{{ option[0] }}" class="radio-label">
        <input type="radio" class="radio" name="temp-files" value="{{ option[0] }}" id="temp-files-{{ option[0] }}" {{
          checked }}>
        {{ option[1] }}
      </label>
    </div>
    {% endfor %}
  </fieldset>
  <fieldset>
    <legend>Restore Defaults</legend>
    <p>
      <button class="submit" type="button" id="restore-defaults">Restore Default Settings</button>
    </p>
  </fieldset>
</form>